
.. article::
  :order: 10
  

Miyadaiku project
======================


Miyadaiku's document project is created with ``miyadaiku-start`` command.

.. code-block:: sh
   :caption: Creating new miyadaiku project:
  
   $ miyadaiku-start new-project
   $ ls new-project/
   config.yml	contents	files	modules	templates



Directory structure
----------------------------


The document project consists of the following files.

::

   first_doc/
        ├─── config.yml   YAML file to specify project settings.
        │
        ├─── contents/    Directory to store contents such as reStructuredText/Markdown files.
        │
        ├─── files/       Directory to store files such as images.
        │
        ├─── modules/     Directory to store Python modules files.
        │
        ├─── templates/   Directory to store Jinja2 template files.
        │
        └─── outputs/     Directory to output generated files.


:config.yml file: 
   YAML file to specify default properties for the entire project.

:contents directory: 
   Directory to store doucument source files and configuration files.

:files dirctory:
   Files in the directory are not converted by ``miyadaiku-build`` command, but copied to the ``outputs`` directory as is.

:modules directory: 
   ``*.py`` files in the directory are imported as Python module. The module names can be refered within jinja2 script.

:templates directory: 
   Stores jinja2 template files.

:outputs directory:
   Stores generated files generated by ``miyadaiku-build`` command. 



Content files
--------------------------


The ``miyadaiku-build`` command processes following type of files in the ``contents`` directory as content files to generate HTML.

- \*.yml file
- \*.rst file
- \*.md file
- \*.html file
- \*.ipynb file


The result of the command are directed to the ``outputs`` directory. Other files than the above are not processed as source files and are copied directly to the outputs directory.



The contents of the ``contents`` directory are of the following four types.

Article
   The document files in the ``contents`` directory is read as articles to generate HTML with Jinja2 template engine.


Snippet
   Snippets are document files like an articles, but they are not converted to  HTML files. Snippets are embedded in other articles and templates.

Index
    Creates index pages of articles for blog sites.

Config
    The config files are written in YAML format that specifies default values ​​of document properties for each directory. No outputs are generated by config files.



Templates
-------------------

Content files in the ``contents`` directory are processed by reST, Markdown parser, etc., and then converted to HTML by the Jinja2 template engine. From the generated HTML, the final HTML files are created with the Jinja template in the ``templates`` directory and output to the ``outputs`` directory.


:jinja:`<img src="{{content.path_to('/img/process.png')}}" width=500px>`

